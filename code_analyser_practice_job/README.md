# Статический анализ кода на Python

## Преимущества использования статического анализатора

Статический анализатор не заменяет другие инструменты поиска ошибок - он дополняет их. Внедрение такого инструмента позволяет устранять многие ошибки на этапе "зарождения", тем самым экономя время и ресурсы на их последующее устранение. Чем раньше найдена ошибка, тем дешевле стоимость её исправления. Статический анализатор необходимо использовать регулярно, именно в таком случае он проявит себя наиболее эффективно. Предложенные инструменты призваны не заменить ручной code-rewiev, но дополнить его.

## Создайте и активируйте виртуальное окружение

Здесь и далее все инструменты устанавливаются через pip в виртуальное окружение. Все команды выполняются в командной строке в виртуальном окружении.

## Создание виртуального окружения

`python -m venv .venv`

## Активация виртуального окружения Linux/macOS

`source .venv/bin/activate`

## Активация виртуального окружения Windows

`.venv\Scripts\activate`

### Установите необходимые инструменты

Выполните в терминале, при активированном виртуальном окружении:

`pip install pylint flake8 mypy bandit vulture flake8-json`

Установили следующие пакеты:

pylint — комплексный анализ кода
flake8 + flake8-json — проверка стиля и логических ошибок
mypy — статическая проверка типов
bandit — поиск уязвимостей безопасности
vulture — поиск неиспользуемого ("мёртвого") кода
black — автоформатирование кода

### Проверьте версии установленных пакетов:

`pylint --version`

`flake8 --version`

`mypy --version`

`bandit --version`

`vulture --version`

`black --version`

Создайте файл с ошибками my_script.pyили воспользуйтесь предложенным

Убедитесь, что ваш файл my_script.py (с намеренно внесёнными ошибками) находится в той же директории, где вы работаете.

### Запустите анализаторы с сохранением отчёта в JSON формате

Выполните каждую команду по очереди. Ознакомьтесь с текстовым выводом программ и содержимым JSON файлов.

#### pylint

`pylint my_script.py`

`pylint --output-format=json my_script.py > pylint.json`

#### flake8

`flake8 my_script.py`

`flake8 --format=json my_script.py > flake8.json`

#### bandit

`bandit my_script.py`

`bandit -f json my_script.py > bandit.json`

#### mypy

`mypy my_script.py`

`mypy --output=json my_script.py > mypy.json`

#### vulture

`vulture my_script.py`

> vulture не выводит результат в JSON. Обрабатываем текстовый вывод с помощью костыля

`python vulture_to_json.py my_script.py vulture.json`

Объедините все JSON файлы в единый CSV-отчёт

`python json_to_csv.py`

В результате должен получиться файл static_analysis_report.csv с единым табличным отчётом.

### Задание

Используя предложенный способ провести анализ кода тестовой программы.
Изучить отчет о работе анализатора.
Исправить ошибки (достаточно 5 штук) и заново протестировать.
Описать типы ошибок.
Описать используемые пакеты для анализа кода.

### Вопросы

Что такое статический анализ кода?
Какова основная цель статического анализа?
Что такое антипаттерны в статическом анализе?
Какой из используемых инструментов предназначен в первую очередь для поиска уязвимостей безопасности в Python?
В чем важность статического анализа кода?
Может ли статический анализатор обнаружить все возможные ошибки в программе?

